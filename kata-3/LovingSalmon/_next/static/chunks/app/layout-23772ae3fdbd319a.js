(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7131:function(e,t,n){Promise.resolve().then(n.bind(n,3723)),Promise.resolve().then(n.bind(n,8887)),Promise.resolve().then(n.t.bind(n,3247,23)),Promise.resolve().then(n.t.bind(n,8877,23))},3146:function(e,t,n){"use strict";n.d(t,{Jr:function(){return r},Rz:function(){return i},f$:function(){return s},pw:function(){return o}});let r="farm-royale-game-state",o=1e3,i=8,s=1.55},3723:function(e,t,n){"use strict";n.d(t,{GameProvider:function(){return d},j:function(){return v}});var r=n(7437),o=n(2265),i=n(3146),s=n(4235);class a extends s.Z{constructor(e){super("Tomato","tomato",250,170,39e4,e)}}class l extends s.Z{constructor(e){super("Carrot","carrot",100,75,6e4,e)}}class u extends s.Z{constructor(e){super("Corn","corn",200,140,3e5,e)}}class c extends s.Z{constructor(e){super("Potato","potato",65,50,3e4,e)}}class h extends s.Z{constructor(e){super("Eggplant","eggplant",300,200,6e5,e)}}let m={money:500,maxTiles:16,tiles:[{id:1,crop:null},{id:2,crop:null},{id:3,crop:null},{id:4,crop:null},{id:5,crop:null},{id:6,crop:null},{id:7,crop:null},{id:8,crop:null}],shop:[new c,new l,new u,new a,new h]};class p{createRandomCrop(e){let t=Math.floor(Math.random()*this.cropTypes.length);return new this.cropTypes[t](e)}constructor(){this.cropTypes=[c,l,u,a,h]}}let f=(0,o.createContext)(void 0);function d(e){let{children:t}=e,[n,s]=(0,o.useState)(void 0),[a,l]=(0,o.useState)(new Date().getTime()),[u]=(0,o.useState)(new p);return(0,o.useEffect)(()=>{let e=setInterval(()=>{l(Date.now())},1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{let e=localStorage.getItem(i.Jr);e?s(JSON.parse(e)):s(m)},[]),(0,o.useEffect)(()=>{n&&localStorage.setItem(i.Jr,JSON.stringify(n))},[n]),(0,r.jsx)(f.Provider,{value:{gameState:n,gameLoopStamp:a,cropFactory:u,updateTile:(e,t)=>{let r=n.tiles.map(n=>n.id===e?{...n,crop:t}:n);s(e=>({...e,tiles:r}))},updateMoney:e=>{n&&!(n.money+e<0)&&s(t=>({...t,money:t.money+e}))},updateShop:()=>{let e=[,,,,,].fill(null).map(()=>u.createRandomCrop(!0));s(t=>({...t,shop:e}))},addTile:e=>{if(!n||n.tiles.length>=n.maxTiles)return;let t={id:e,crop:null};s(e=>({...e,tiles:[...e.tiles,t]}))}},children:t})}function v(){let e=(0,o.useContext)(f);if(void 0===e)throw Error("useGameContext must be used within a GameProvider");return e}},8887:function(e,t,n){"use strict";n.d(t,{I:function(){return a},InterfaceProvider:function(){return s}});var r=n(7437),o=n(2265);let i=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[n,s]=(0,o.useState)(void 0);return(0,r.jsx)(i.Provider,{value:{tileSelected:n,selectTile:e=>{s(e)}},children:t})}function a(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useInterface must be used within a InterfaceProvider");return e}},4235:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let r=[{name:"Increased Value",iconName:"coin",value:1.5,priceChange:1.1},{name:"Half Growth Time",iconName:"clock",value:.5,priceChange:1.2},{name:"Double Amount",iconName:"double",value:2,priceChange:1.4}],o=()=>r[Math.floor(Math.random()*r.length)],i=e=>{let t=[];for(;t.length<e;){let e=o();t.some(t=>t.name===e.name)||t.push(e)}return t};class s{applyRandomMutations(){let e=Math.floor(100*Math.random())+1;if(e>=1&&e<=85);else if(e>85&&e<=94){let e=i(1);this.mutations.push(...e)}else if(e>94&&e<=98){let e=i(2);this.mutations.push(...e)}else if(e>98&&e<=100){let e=i(3);this.mutations.push(...e)}this.mutations.forEach(e=>{"Increased Value"===e.name?(this.value=this.value*e.value,this.price=Math.floor(this.price*e.priceChange)):"Half Growth Time"===e.name?(this.growthDuration=this.growthDuration*e.value,this.price=Math.floor(this.price*e.priceChange)):"Double Amount"===e.name&&(this.value=this.value*e.value,this.price=Math.floor(this.price*e.priceChange))})}plant(){let e=new Date().getTime();this.growthTimeStart=e,this.growthTimeEnd=e+this.growthDuration}constructor(e,t,n,r,o,i=!1){this.growthTimeStart=0,this.growthTimeEnd=0,this.mutations=[],this.name=e,this.imageName=t,this.value=n,this.price=r,this.growthDuration=o,i&&this.applyRandomMutations()}}var a=s},8877:function(){},3247:function(e){e.exports={style:{fontFamily:"'__Inter_75fcb4', '__Inter_Fallback_75fcb4'",fontStyle:"normal"},className:"__className_75fcb4"}}},function(e){e.O(0,[569,971,23,744],function(){return e(e.s=7131)}),_N_E=e.O()}]);