import{i as P,S as o,o as R,h as I,j as S,s as h,k as j,l as d,m as D,n as w,p as g,g as m,U as l,q as _,d as O,t as T,v as b,b as k,w as v,x as A}from"./runtime.BZPDgqSr.js";function y(e,n=!0,s){if(typeof e=="object"&&e!=null&&!P(e)){if(o in e){const t=e[o];if(t.t===e||t.p===e)return t.p}const f=T(e);if(f===R||f===I){const t=new Proxy(e,E);return S(e,o,{value:{s:new Map,v:h(0),a:j(e),i:n,p:t,t:e},writable:!0,enumerable:!1}),t}}return e}function x(e,n=1){d(e,e.v+n)}const E={defineProperty(e,n,s){if(s.value){const f=e[o],t=f.s.get(n);t!==void 0&&d(t,y(s.value,f.i,f.o))}return Reflect.defineProperty(e,n,s)},deleteProperty(e,n){const s=e[o],f=s.s.get(n),t=s.a,i=delete e[n];if(t&&i){const c=s.s.get("length"),a=e.length-1;c!==void 0&&c.v!==a&&d(c,a)}return f!==void 0&&d(f,l),i&&x(s.v),i},get(e,n,s){var i;if(n===o)return Reflect.get(e,o);const f=e[o];let t=f.s.get(n);if(t===void 0&&(_()||D)&&(!(n in e)||(i=w(e,n))!=null&&i.writable)&&(t=(f.i?h:g)(y(e[n],f.i,f.o)),f.s.set(n,t)),t!==void 0){const c=m(t);return c===l?void 0:c}return Reflect.get(e,n,s)},getOwnPropertyDescriptor(e,n){const s=Reflect.getOwnPropertyDescriptor(e,n);if(s&&"value"in s){const t=e[o].s.get(n);t&&(s.value=m(t))}return s},has(e,n){var i;if(n===o)return!0;const s=e[o],f=Reflect.has(e,n);let t=s.s.get(n);return(t!==void 0||_()&&(!f||(i=w(e,n))!=null&&i.writable))&&(t===void 0&&(t=(s.i?h:g)(f?y(e[n],s.i,s.o):l),s.s.set(n,t)),m(t)===l)?!1:f},set(e,n,s,f){const t=e[o];let i=t.s.get(n);i===void 0&&_()&&(O(()=>f[n]),i=t.s.get(n)),i!==void 0&&d(i,y(s,t.i,t.o));const c=t.a,a=!(n in e);if(c&&n==="length")for(let r=s;r<e.length;r+=1){const u=t.s.get(r+"");u!==void 0&&d(u,l)}if(e[n]=s,a){if(c){const r=t.s.get("length"),u=e.length;r!==void 0&&r.v!==u&&d(r,u)}x(t.v)}return!0},ownKeys(e){const n=e[o];return m(n.v),Reflect.ownKeys(e)}};function L(e,n,s){let f,t,i=new Set;const c=b(()=>{if(f!==(f=n())){if(t){var a=t;A(a,()=>{i.delete(a)})}f&&(t=b(()=>{s(f);const r=k.dom;return()=>{r!==null&&v(r)}},!0),i.add(t))}});c.ondestroy=()=>{for(const a of i)a.dom&&v(a.dom)}}export{L as c,y as p};
